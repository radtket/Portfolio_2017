(function() {
    var e;
    var i = function() {};
    var o = [ "assert", "clear", "count", "debug", "dir", "dirxml", "error", "exception", "group", "groupCollapsed", "groupEnd", "info", "log", "markTimeline", "profile", "profileEnd", "table", "time", "timeEnd", "timeline", "timelineEnd", "timeStamp", "trace", "warn" ];
    var n = o.length;
    var t = window.console = window.console || {};
    while (n--) {
        e = o[n];
        if (!t[e]) {
            t[e] = i;
        }
    }
})();

$(window).on("load", function() {
    $("body").imagesLoaded({
        background: true
    }, function() {
        $(".page-loader div").fadeOut();
        $(".page-loader").delay(200).fadeOut("slow");
    });
    $(window).trigger("scroll");
    $(window).trigger("resize");
});

$(function() {
    $(window).trigger("resize");
    init_nav_menu();
    init_sliders();
    init_smooth_scroll();
});

$(window).on("resize", function() {});

function init_nav_menu() {
    var e = $(".hamburger").unbind();
    var i = $(".navbar__nav");
    i.removeClass("navigation-open");
    e.on("click", function(e) {
        e.preventDefault();
        $(".hamburger").toggleClass("is-active");
        i.slideToggle(function() {
            if (i.is(":hidden")) {
                i.removeAttr("style");
                $(".hamburger").removeClass("is-active");
            }
        });
    });
}

function init_smooth_scroll() {
    $('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click(function(e) {
        if (location.pathname.replace(/^\//, "") == this.pathname.replace(/^\//, "") && location.hostname == this.hostname) {
            var i = $(this.hash);
            i = i.length ? i : $("[name=" + this.hash.slice(1) + "]");
            if (i.length) {
                e.preventDefault();
                $("html, body").animate({
                    scrollTop: i.offset().top
                }, 1e3, function() {
                    var e = $(i);
                    e.focus();
                    if (e.is(":focus")) {
                        return false;
                    } else {
                        e.attr("tabindex", "-1");
                        e.focus();
                    }
                });
            }
        }
    });
}

function init_sliders() {
    $(".slick__clients").slick({
        infinite: true,
        speed: 300,
        slidesToShow: 3,
        slidesToScroll: 1,
        responsive: [ {
            breakpoint: 1024,
            settings: {
                slidesToShow: 3,
                slidesToScroll: 1
            }
        }, {
            breakpoint: 800,
            settings: {
                slidesToShow: 2,
                slidesToScroll: 2
            }
        }, {
            breakpoint: 600,
            settings: {
                slidesToShow: 1,
                slidesToScroll: 1,
                arrows: false
            }
        } ]
    });
    $(".slick__testimonial").slick({
        responsive: [ {
            breakpoint: 800,
            settings: {
                arrows: false
            }
        } ]
    });
}

var $contactForm = $("#js-contact-form");

$contactForm.submit(function(e) {
    e.preventDefault();
    $.ajax({
        url: "//formspree.io/taylorradtke@gmail.com",
        method: "POST",
        data: $(this).serialize(),
        dataType: "json",
        beforeSend: function() {
            $contactForm.append('<div class="alert alert--loading">Sending messageâ€¦</div>');
        },
        success: function(e) {
            $contactForm.find(".alert--loading").hide();
            $contactForm.append('<div class="alert alert--success">Message sent!</div>');
        },
        error: function(e) {
            $contactForm.find(".alert--loading").hide();
            $contactForm.append('<div class="alert alert--error">Ops, there was an error.</div>');
        }
    });
});